module.exports = {
  event: 'add',
  handle: async ({ api, event }) => {
    const newMembers = event.participants;
    const groupInfo = await api.groupMetadata(event.id);
    const groupName = groupInfo.subject;
    const totalMembers = groupInfo.participants.length;

    for (const member of newMembers) {
      let profilePicUrl;
      try {
        profilePicUrl = await api.profilePictureUrl(member, 'image');
      } catch (error) {
        profilePicUrl = "https://i.ibb.co/2kX1MZL/default.jpg"; // ржпржжрж┐ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржкрж┐ржХ ржирж╛ ржерж╛ржХрзЗ
      }

      const username = `@${member.split('@')[0]}`;

      const welcomeLines = [
        `ЁЯМ╕ рж╕рзНржмрж╛ржЧрждржо ${username}! \nрждрзБржорж┐ ржПржЦржи ржкрж░рж┐ржмрж╛рж░ ${groupName}-ржПрж░ рж╕ржжрж╕рзНржп ЁЯдЧ`,
        `ЁЯОЙ ржУрж░рзЗ ржмрж╛ржмрж╛! ${username} ржЪрж▓рзЗ ржЖрж╕ржЫрзЗ ${groupName}-ржП ЁЯЪА\nржПржЦржи ржЧрзНрж░рзБржк рж╣ржмрзЗ ржЖрж░рзЛ ржЬржоржЬржорж╛ржЯ ЁЯФе`,
           `ЁЯТР ${username}, рждрзЛржорж╛ржХрзЗ ${groupName}-ржП рж╕рж╛ржжрж░ ржЖржоржирзНрждрзНрж░ржг ЁЯе░\nржЪрж▓рзЛ ржПржХрж╕рж╛ржерзЗ ржоржЬрж╛ ржХрж░рж┐ ЁЯО╢`,
  `ЁЯЪА ржмрзНрж░рзЗржХрж┐ржВ ржирж┐ржЙржЬ: ${username} ржЕржмрждрж░ржг ржХрж░рзЗржЫрзЗ ${groupName}-ржП ЁЯдЦ`,
  `ЁЯФе ржУрж╣рж╣ ${username} ржЪрж▓рзЗ ржЖрж╕ржЫрзЗ,\n${groupName}-ржПрж░ рж▓рзЗржнрзЗрж▓ ржмрзЗрзЬрзЗ ржЧрзЗрж▓рзЛ ЁЯФЭ`,
  `ЁЯТб ${username}, ${groupName}-ржП ржПрж▓рзЗ ржЖрж▓рзЛ ржЭрж▓ржорж▓ тЬи`,
  `ЁЯШП ${username}, рж╕рж╛ржмржзрж╛ржи! ${groupName}-ржП ржЕржирзЗржХ ржнржпрж╝ржВржХрж░ ржорзЗржорзНржмрж╛рж░ ржЖржЫрзЗ ЁЯШЬ`,

  `ЁЯОК ${username} ржПрж▓рзЛ, ${groupName}-ржПрж░ ржнрж┐ржмрж╕ ржПржХржжржо рж╣рж╛ржЗ ЁЯУИ`,
  `ЁЯТЮ ${username}, ${groupName}-ржПрж░ ржлрзНржпрж╛ржорж┐рж▓рж┐рждрзЗ рждрзБржорж┐ржЗ ржЖржорж╛ржжрзЗрж░ ржирждрзБржи рж╕рзНржЯрж╛рж░ ЁЯМЯ`,
  `тЪб ржмрзНрж░рзЛ ${username}, рждрзБржорж┐ ржЖрж╕рж╛рзЯ ${groupName}-ржПрж░ ржкрж╛ржУрзЯрж╛рж░ ржЕржи тЬЕ`,
  `ЁЯО╢ ${username} ржЖрж╕ржЫрзЗ ржорж╛ржирзЗржЗ ржорж┐ржЙржЬрж┐ржХ ржЪрж╛рж▓рж╛ржУ ржнрж╛ржЗ, ржкрж╛рж░рзНржЯрж┐ рж╢рзБрж░рзБ ЁЯеБ`,
  `ЁЯНХ ${username}, ${groupName}-ржП ржврзБржХрзЗржЫрзЛ ржорж╛ржирзЗржЗ рж╕ржмрж╛ржЗржХрзЗ ржЯрзНрж░рж┐ржЯ ржжрж┐рждрзЗ рж╣ржмрзЗ! ЁЯШЛ`,

  `ЁЯСС ${username} = ржПржЦржи ${groupName}-ржПрж░ ржирждрзБржи VIP ЁЯФе`,
  `ЁЯХ╣я╕П ${username} ржПржЦржи ${groupName}-ржПрж░ ржЧрзЗржо ржорзЛржб ржЪрж╛рж▓рзБ ржХрж░рж▓рзЛ ЁЯОо`,
  `ЁЯТМ ${username}, рж╕рзНржмрж╛ржЧрждржо!\nрждрзБржорж┐ ржЫрж╛рзЬрж╛ ${groupName} ржЫрж┐рж▓рзЛ ржЕрж╕ржорзНржкрзВрж░рзНржг тЭдя╕П`,
  `ЁЯУв ржоржирзЛржпрзЛржЧ! ${username} ржПрж╕рзЗ ржЧрзЗржЫрзЗ ${groupName}-ржП ЁЯТп`,
  `ЁЯдй ${username}, рждрзБржорж┐ ржЖрж╕рж╛рзЯ ${groupName}-ржПрж░ ржПржирж╛рж░рзНржЬрж┐ ржбрж╛ржмрж▓ тЬи`,

  `ЁЯШЗ ${username}, ${groupName}-ржП ржПрж▓рзЗ рж╕рзНржмрж░рзНржЧ ржирзЗржорзЗ ржПрж▓рзЛ ЁЯМ╕`,
  `ЁЯдЦ ${username}, ржПржЦржи ржерзЗржХрзЗ рждрзБржорж┐ ${groupName}-ржПрж░ ржмржЯ ржЯрзЗрж╕рзНржЯрж╛рж░ ЁЯШЬ`,
  `ЁЯеВ ${username}, ржЪрж▓ ${groupName}-ржП рж╕ржмрж╛ржЗ ржорж┐рж▓рзЗ ржЪрж┐рзЯрж╛рж░рзНрж╕ ржХрж░рж┐ ЁЯе│`,
  `ЁЯТА ${username} рж╕рж╛ржмржзрж╛ржи! ${groupName}-ржП ржЕржирзЗржХ ржоржЬрж╛ ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ ржЯрзНрж░рж▓ржУ ржЖржЫрзЗ ЁЯШВ`,
  `ЁЯС╛ ${username}, ${groupName}-ржПрж░ ржПржбржнрзЗржЮрзНржЪрж╛рж░рзЗ рж╕рзНржмрж╛ржЧрждржо ЁЯЪА`,
          `ЁЯМЯ ${username} ржПрж╕рзЗ ржкрзЬрзЗржЫрзЗ!\nржПржЦржи ${groupName}-ржПрж░ ржнрж┐ржмрж╕ ржбрж╛ржмрж▓ ЁЯМИ`,
  `ЁЯНл ${username}, ${groupName}-ржП ржврзБржХрзЗржЫрзЛ ржорж╛ржирзЗржЗ ржЖржорж╛ржжрзЗрж░ ржорж┐рж╖рзНржЯрж┐ ржЦрж╛ржУрзЯрж╛ржУ ЁЯШЛ`,
  `ЁЯХ║ ${username} ржЖрж╕рж▓рзЛ ржЖрж░ ${groupName}-ржП ржирж╛ржЪ рж╢рзБрж░рзБ ЁЯе│`,
  `ЁЯОд ржмрзНрж░рзЗржХрж┐ржВ ржирж┐ржЙржЬ: ${username} ${groupName}-ржПрж░ ржирждрзБржи рж╣рж┐рж░рзЛ ЁЯОм`,
  `ЁЯТО ${username}, рждрзБржорж┐ ржЖрж╕рж╛рзЯ ${groupName}-ржПрж░ ржнрзНржпрж╛рж▓рзБ рззрзж ржЧрзБржг ржмрзЗрзЬрзЗ ржЧрзЗрж▓рзЛ ЁЯТп`,

  `ЁЯж╕ ${username} ржПрж▓рзЛ ${groupName}-ржП, рж╕ржмрж╛ржЗ ржПржЦржи рж╕рзЗржл ЁЯФе`,
  `ЁЯШЛ ${username}, ржЧрзНрж░рзБржкрзЗ ржврзБржХрзЗржЫрзЛ ржорж╛ржирзЗ ржЖржбрзНржбрж╛ рж╣ржмрзЗ ржЬржоржЬржорж╛ржЯ тШХ`,
  `ЁЯУ╕ ${username}, ${groupName}-ржП ржЖрж╕рж╛рзЯ рж╕рзЗрж▓ржлрж┐ ржЯрж╛ржЗржо ЁЯУ╖`,
  `ЁЯТб ${username} = ${groupName}-ржПрж░ ржирждрзБржи ржЖржЗржбрж┐рзЯрж╛ ржорзЗрж╢рж┐ржи ЁЯдЦ`,
  `ЁЯОп ${username}, рждрзБржорж┐ ржЖрж╕рж╛рзЯ ${groupName}-ржПрж░ ржорж┐рж╢ржи ржХржоржкрзНрж▓рж┐ржЯ тЬЕ`,

  `ЁЯЪи рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛: ${username} ${groupName}-ржП ржкрзНрж░ржмрзЗрж╢ ржХрж░рзЗржЫрзЗ ЁЯШО`,
  `ЁЯдй ${username}, рждрзЛржорж╛ржХрзЗ ржЫрж╛рзЬрж╛ ${groupName}-ржПрж░ ржЫржмрж┐ ржЕрж╕ржорзНржкрзВрж░рзНржг ржЫрж┐рж▓рзЛ ЁЯЦ╝я╕П`,
  `ЁЯО╢ ${username}, ржЖрж╕рждрзЗржЗ ${groupName}-ржП ржЧрж╛ржи ржмрж╛ржЬржЫрзЗ ЁЯОз`,
  `ЁЯНА ${username}, ${groupName}-ржП ржПрж▓рзЗ ржнрж╛ржЧрзНржп ржЦрзБрж▓рзЗ ржЧрзЗрж▓рзЛ ЁЯТл`,
  `ЁЯе░ ${username}, рждрзЛржорж╛ржХрзЗ ржжрзЗржЦрзЗ ${groupName}-ржПрж░ рж╕ржмрж╛ржЗ рж╣рж╛рж╕рж▓рзЛ ЁЯШК`,

  `ЁЯХКя╕П ${username}, ${groupName}-ржП ржПрж▓рзЗ рж╢рж╛ржирзНрждрж┐ ржирж╛ржорж▓рзЛ ЁЯЩП`,
  `ЁЯШИ рж╕рж╛ржмржзрж╛ржи! ${username} ржПрж╕рзЗ ржЧрзЗржЫрзЗ ${groupName}-ржП ЁЯШЬ`,
  `ЁЯСС ${username}, рждрзБржорж┐ ${groupName}-ржПрж░ ржирждрзБржи рж░рж╛ржЬрж╛/рж░рж╛ржирзА ЁЯС╕ЁЯд┤`,
  `ЁЯМН ${username}, ${groupName}-ржПрж░ ржЧрзНрж▓рзЛржмрж╛рж▓ ржлрзНржпрж╛ржорж┐рж▓рж┐рждрзЗ рж╕рзНржмрж╛ржЧрждржо ЁЯМО`,
  `ЁЯе│ ${username} ржПрж▓рзЛ, ржПржЦржи ${groupName}-ржП ржкрж╛рж░рзНржЯрж┐ рж╢рзБрж░рзБ ЁЯОЙ`,

  `тЪб ${username}, ${groupName}-ржП ржврзБржХрзЗржЗ ржкрж╛ржУрзЯрж╛рж░ ржЕржи ржХрж░рж▓рзЛ ЁЯФЛ`,
  `ЁЯТЭ ${username}, рждрзЛржорж╛ржХрзЗ ${groupName}-ржПрж░ рж╣рзГржжрж┐ ржерзЗржХрзЗ рж╕рзНржмрж╛ржЧрждржо тЭдя╕П`,
  `ЁЯе╖ ${username} ${groupName}-ржП ржирж┐ржиржЬрж╛ рж╕рзНржЯрж╛ржЗрж▓рзЗ ржПржирзНржЯрзНрж░рж┐ ржжрж┐рж▓рзЛ ЁЯдл`,
  `ЁЯО▓ ${username}, рждрзБржорж┐ ржЖрж╕рж╛рзЯ ${groupName}-ржПрж░ ржЧрзЗржо ржЖрж░ржУ ржоржЬрж╛рж░ рж╣рж▓рзЛ ЁЯОо`,
  `ЁЯЪА ${username}, ржПржЦржи ${groupName}-ржПрж░ рж╕рзНржкрж┐ржб рж╕рзБржкрж╛рж░рж╕ржирж┐ржХ тЬИя╕П`,

  `ЁЯМ╗ ${username}, рждрзБржорж┐ ${groupName}-ржПрж░ ржирждрзБржи рж░рзЛржжрзНржжрзБрж░ тШАя╕П`,
  `ЁЯУв рж╕ржмрж╛ржЗ рж╢рзЛржирзЛ! ${username} ржПрж▓рзЛ ${groupName}-ржП ЁЯФК`,
  `ЁЯХ╣я╕П ${username}, ${groupName}-ржПрж░ ржирждрзБржи ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░ рж╣рж╛рждрзЗ ржирж┐рзЯрзЗржЫрзЗ ЁЯОо`,
  `ЁЯНЯ ${username}, ${groupName}-ржП ржЖрж╕рж╛рзЯ ржмрж╛рж░рзНржЧрж╛рж░ ржкрж╛рж░рзНржЯрж┐ рж╣ржмрзЗ ЁЯНФ`,
  `ЁЯдЯ ${username}, ржПржЦржи ${groupName}-ржПрж░ ржнрж╛ржЗржмрж╕ ржПржХрзЗржмрж╛рж░рзЗ рж╣рж╛ржЗ ЁЯФе`,

  `ЁЯОЗ ${username}, рждрзЛржорж╛рж░ рж╕рж╛ржерзЗ ${groupName}-ржПрж░ рж░ржЩрж┐ржи ржлрзЗрж╕рзНржЯрж┐ржнрж╛рж▓ рж╢рзБрж░рзБ ЁЯОЖ`,
  `ЁЯР╝ ${username}, рждрзБржорж┐ ${groupName}-ржПрж░ ржирждрзБржи ржХрж┐ржЙржЯрж┐ ЁЯР╗`,
  `ЁЯзй ${username}, ${groupName}-ржПрж░ ржкрж╛ржЬрж▓ ржПржЦржи ржХржоржкрзНрж▓рж┐ржЯ тЬЕ`,
  `ЁЯТГ ${username}, рждрзБржорж┐ ржЖрж╕рж╛рзЯ ${groupName}-ржП ржбрж╛ржирзНрж╕ ржмрзНржпрж╛ржЯрзЗрж▓ рж╢рзБрж░рзБ ЁЯТе`,
  `ЁЯОБ ${username}, ${groupName}-ржПрж░ ржЬржирзНржп рждрзБржорж┐ ржЖрж╕рж▓ ржЧрж┐ржлржЯ ЁЯОК`,
        `ЁЯШО ржХрж┐рж░рзЗ ${username}, ржЕржмрж╢рзЗрж╖рзЗ ${groupName}-ржП ржкрж╛ рж░рж╛ржЦрж▓рж┐!\nржПржЦржи ржоржЬрж╛ рж╣ржмрзЗ ЁЯФе`,
        `ЁЯе│ ржЪрж▓ рж╕ржмрж╛ржЗ рждрж╛рж▓рж┐ ржжрзЗ, ${username} ржЖржорж╛ржжрзЗрж░ ржжрж▓рзЗ ржПрж▓рзЛ ЁЯОК`,
        `ЁЯСЛ рж╣рзНржпрж╛рж▓рзЛ ${username},\nрж╕рзНржмрж╛ржЧрждржо ${groupName}-ржП ЁЯМН\nржоржЬрж╛ ржХрж░, рж╣рзЗрж╕рзЗ ржЦрзЗрж▓рзЗ ржерж╛ржХ, ржХрж┐ржирзНрждрзБ рж░рзБрж▓ ржнрж╛ржЩрж▓рзЗржЗ ЁЯШб`
      ];

      // рж░тАНрзНржпрж╛ржирзНржбржо ржУрзЯрзЗрж▓ржХрж╛ржо ржорзЗрж╕рзЗржЬ
      const randomWelcome = welcomeLines[Math.floor(Math.random() * welcomeLines.length)];

      const finalMessage = `тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ\n${randomWelcome}\n\nЁЯСе *ржорзЛржЯ ржорзЗржорзНржмрж╛рж░:* ${totalMembers}\nЁЯУв *ржЧрзНрж░рзБржк рж░рзБрж▓рж╕:* ржнржжрзНрж░ ржерж╛ржХрзЛ, ржоржЬрж╛ ржХрж░рзЛ, ржХрж┐ржирзНрждрзБ рж╕рзАржорж╛ ржЫрж╛рзЬрж┐ржУ ржирж╛ ЁЯШБ\nтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ`;

      await api.sendMessage(event.id, {
        image: { url: profilePicUrl },
        caption: finalMessage,
        mentions: [member]
      });
    }
  }
};
